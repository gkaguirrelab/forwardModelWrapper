The following options are accepted:
 * --help|-h
   Prints this message.
 * --verbose|-v
   Specifies that progress messages should be printed during the registration.
 * --lh-eccen=|-e<file>
   --lh-angle=|-a<file>
   --lh-weight=|-w<file>
   --lh-radius=|-q<file>
   --lh-theta=|-t<file>
   --lh-rho=|-r<file>
   --rh-eccen=|-e<file>
   --rh-angle=|-a<file>
   --rh-weight=|-w<file>
   --rh-radius=|-q<file>
   --rh-theta=|-t<file>
   --rh-rho=|-r<file>
   Each of these arguments specifies the name of a data file to load in as a
   representation of the subject's eccentricity (eccen), polar angle (angle), 
   pRF radius (radius), or weight; these should be the names of either an
    mgh/mgz files whose size is 1 x 1 x n, where n is the number of vertices in
   the hemisphere for the subject, or a FreeSurfer curv-style filename with n
   vertices. By default, files in the subject's surf directory that match a
   name-template are automatically loaded and used. This template is name
   <hemi>.<tag><name>, optionally ending with .mgz, where tag is one of (and in
   order of preference) 'prf_', 'empirical_', 'measured_', 'training_', or '',
   and name is one of 'eccentricity'/'eccen', 'polar_angle'/'angle',
   'radius'/'prfsz'/'sigma', or 'weight'/'variance_explained'/'vexpl'. Note that
   the options ?h-theta and ?h-rho specify that the polar angle (theta) or
   eccentricity (rho) are in radians.
 * --no-volume-export|-x
   --no-surface-export|-z
   --no-registration-export|-X
   Specifies that either volumes, surfaces, or the registration (.sphere.reg)
   files should not be exported.
 * --no-overwrite|-n
   Specifies that files should not be overwritten if they exist already. 
 * --no-lh|-k
   --no-rh|-K
   Specifies that the given hemisphere should not be registered.
 * --clean|-c
   Instructs the algorithm to clean the retinotopy with a basic smoothing
   routine before performing registration (EXPERIMENTAL).
 * --model-sym|-S
   Specifies that the model used should be a version of the Schira2010 model
   as used in Benson et al. (2014) PLOS Comput Biol; this model is on the
   fsaverage_benson17 pseudo-hemisphere.
 * --no-resample|-b
   Indicates that the cortical map should not be resampled to a uniform
   triangle grid immediately prior to registration. This is generally only a
   good idea when used when the subject being registered is the fsaverage or
   fsaverage_sym subject.
 * --no-invert-rh-angle|-V
   If the RH hemisphere polar angle values do not need to be negated in order to
   match the model, this option should be given. Note that both the standard and
   the fsaverage_sym model (see --model-sym option) encode the polar angle
   values as ranging from 0 degrees (upper vertical meridian) to 180 degrees
   (lower vertical meridian). Therefore, this option should generally not be
   used unless your RH data has already been inverted.
 * --weight-min=|-m<value>
   The cutoff value to use for the weight; 0.1 by default. Weights less than
   this will be truncated to 0.
 * --scale=|-s<weight>
   Specifies the strength of the functional forces relative to anatomical forces
   during the registration; higher values will generally result in more warping
   while lower values will result in less warping. The default value is 20.
 * --field-sign-weight=|-g<weight>
   --radius-weight=|-G<weight>
   These specify the strength of the field-sign-based or radius-based matching
   techniques. Both the field-sign and the pRF radius are used to modify the
   weights on the individual vertices prior to the registration. Values of 0
   indicate that this part of the weight should be ignored while values of 1
   indicate that the weight should be relatively strong (default is 1 for both).
 * --max-steps=|-i<steps>
   This option specifies the maximum number of steps to run the registration; by
   default this is 2000.
 * --max-step-size=|-D<value>
   This specifies the max step-size for any single vertex; by default this is
   0.05.
 * --prior=|-p<name>
   This specifies the name of the prior registration to use in the fsaverage or
   fsaverage_sym subject; by default this is 'benson17'.
 * --eccen-tag=|-y<tag>
   --angle-tag=|-t<tag>
   --label-tag=|-l<tag>
   --radius-tag=|-j<tag>
   These options specify the output tag to use for the predicted measurement
   that results from the registration. By default, these are
   'inferred_eccen', 'inferred_angle', 'inferred_varea', and 'inferred_sigma'.
   The output files have the name <hemi>.<tag>
 * --registration-name=|-u<string>
   This parameter indicates that the registration file, by default named 
   lh.retinotopy.sphere.reg, should instead be named lh.<string>.sphere.reg.
 * --max-output-eccen=|-M<val>
   This specifies the maximum eccentricity to include in the output; there is no
   particular need to limit one's output, but it can be done with this argument.
   By default this is 90.
 * --max-input-eccen=|-I<val>
   --min-input-eccen=|-J<val>
   This specifies the minimum/maximum eccentricity to include in the
   registration. By default these are 90 and 0 degrees, but it is generally a
   good idea to exclude eccentricity values above those used in the stimulus
   presentation.
 * --no-volume-export|-x
   --no-surface-export|-z
   --no-registration-export|-X
   These flags indicate that the various data produced and written to the
   filesystem under normal execution should be suppressed. The volume export
   refers to the predicted volume files exported to the subject's mri directory;
   the registration export refers to the <hemi>.retinotopy_sym.sphere.reg file,
   written to the subject's surf directory, that contains the registered
   coordinates for the subject; and the surface export refers to the
   <hemi>.eccen_predict.mgz and similar files that are written to the
   subject's surf directory.
 * --surf-format=|-f<fmt>
   Specifies that the surface files should be exported in the given format. By
   default this is curv (FreeSurfer curvature files, such as lh.curv), but
   mgh, mgz, or nifti are all valid options.
 * --vol-format=|-F<fmt>
   Specifies that the volume files should be exported in the given format. By
   default this is mgz, but mgh or nifti are also valid options.
 * --surf-outdir=|-o<dir>
   --vol-outdir=|-O<dir>
   Specifies the output directories for the surface and volume files; by default
   this uses the subject's FreeSurfer directory + /surf or /mri.
 * --subjects-dir=|-d
   Specifies additional subject directory search locations (in addition to the
   SUBJECTS_DIR environment variable and the FREESURFER_HOME/subjects
   directories, which are given here in descending search priority) when looking
   for subjects by name. This option cannot be specified multiple times, but it
   may contain : characters to separate directories, as in PATH.
 * --
   This token, by itself, indicates that the arguments that remain should not be
   processed as flags or options, even if they begin with a -.
'''
_retinotopy_parser_instructions = [
    # Flags
    ('h', 'help',                   'help',              False), +
    ('v', 'verbose',                'verbose',           False), +
    ('x', 'no-volume-export',       'no_vol_export',     False),+
    ('z', 'no-surface-export',      'no_surf_export',    False),+
    ('X', 'no-registration-export', 'no_reg_export',     False),+
    ('n', 'no-overwrite',           'no_overwrite',      False),+
    ('k', 'no-lh',                  'run_lh',            True),+
    ('K', 'no-rh',                  'run_rh',            True),+
    ('c', 'clean',                  'clean',             False),+
    ('b', 'no-resample',            'resample',          True),+
    ('N', 'partial-correction',     'part_vol_correct',  False),+
    ('S', 'model-sym',              'model_sym',         False),+
    ('V', 'no-invert-rh-angle',     'invert_rh_angle',   True),+
    # Options
    ['a', 'lh-angle',               'angle_lh_file',     None],
    ['t', 'lh-theta',               'theta_lh_file',     None],
    ['e', 'lh-eccen',               'eccen_lh_file',     None],
    ['r', 'lh-rho',                 'rho_lh_file',       None],
    ['w', 'lh-weight',              'weight_lh_file',    None],
    ['q', 'lh-radius',              'radius_lh_file',    None],
    ['A', 'rh-angle',               'angle_rh_file',     None],
    ['T', 'rh-theta',               'theta_rh_file',     None],
    ['E', 'rh-eccen',               'eccen_rh_file',     None],
    ['R', 'rh-rho',                 'rho_rh_file',       None],
    ['W', 'rh-weight',              'weight_rh_file',    None],
    ['Q', 'rh-radius',              'radius_rh_file',    None],

    ['m', 'weight-min',             'weight_min',        '0.1'],+
    ['s', 'scale',                  'scale',             '20.0'],
    ['g', 'field-sign-weight',      'field_sign_weight', '1.0'],
    ['G', 'radius-weight',          'radius_weight',     '1.0'],
    ['i', 'max-steps',              'max_steps',         '2500'],
    ['D', 'max-step-size',          'max_step_size',     '0.02'],
    ['p', 'prior',                  'prior',             'benson17'],

    ['f', 'surf-format',            'surface_format',    'curv'],
    ['F', 'vol-format',             'volume_format',     'mgz'],
    ['o', 'surf-outdir',            'surface_path',      None],
    ['O', 'vol-outdir',             'volume_path',       None],
    ['y', 'eccen-tag',              'eccen_tag',         'inferred_eccen'],
    ['w', 'angle-tag',              'angle_tag',         'inferred_angle'],
    ['l', 'label-tag',              'label_tag',         'inferred_varea'],
    ['j', 'radius-tag',             'radius_tag',        'inferred_sigma'],
    ['u', 'registration-name',      'registration_name', 'retinotopy'],
    ['M', 'max-output-eccen',       'max_out_eccen',     '90'],
    ['I', 'max-input-eccen',        'max_in_eccen',      '90'],
    ['J', 'min-input-eccen',        'min_in_eccen',      '0'],
    ['d', 'subjects-dir',           'subjects_dir',      None]]
